# ============================================================================
# HumanGlue Platform - Environment Configuration Template
# ============================================================================
# Copy this file to .env.local for local development
# Set these variables in Netlify dashboard for production
#
# IMPORTANT SECURITY NOTES:
# - Never commit .env.local to version control
# - Service role keys and secret keys are SERVER-SIDE ONLY
# - Only NEXT_PUBLIC_* variables are exposed to the browser
# - Rotate all secrets regularly
# ============================================================================

# ============================================================================
# Application Configuration
# ============================================================================

# Environment (development | preview | staging | production)
NEXT_PUBLIC_ENV=development
NODE_ENV=development

# Site URL (update for each environment)
NEXT_PUBLIC_SITE_URL=http://localhost:5040

# Application Name
NEXT_PUBLIC_APP_NAME=HumanGlue

# ============================================================================
# Supabase Configuration
# ============================================================================
# Get these from: https://app.supabase.com/project/_/settings/api
#
# Security:
# - NEXT_PUBLIC_* variables are exposed to the browser
# - SUPABASE_SERVICE_ROLE_KEY is server-side only - NEVER expose to client
# - Service role key bypasses Row Level Security (RLS)

# Project URL - Safe to expose to client
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co

# Anonymous Public Key - Safe to expose to client (RLS protected)
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# Service Role Key - SERVER-SIDE ONLY, NEVER EXPOSE TO CLIENT
# Used in Netlify Functions and server-side operations
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# Storage URL - For file uploads (user avatars, certificates, etc.)
NEXT_PUBLIC_SUPABASE_STORAGE_URL=https://your-project.supabase.co/storage/v1

# JWT Secret (for advanced use cases)
# SUPABASE_JWT_SECRET=your-jwt-secret

# ============================================================================
# NextAuth.js Configuration (if using)
# ============================================================================
# Generate secret with: openssl rand -base64 32

# NEXTAUTH_URL=http://localhost:5040
# NEXTAUTH_SECRET=generate-a-random-secret-here

# ============================================================================
# Stripe Payment Configuration
# ============================================================================
# Get these from: https://dashboard.stripe.com/apikeys
#
# Security:
# - Use test keys (pk_test_*, sk_test_*) for development
# - Use live keys (pk_live_*, sk_live_*) for production
# - Never commit live keys to version control

# Publishable Key - Safe to expose to client
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_51...

# Secret Key - SERVER-SIDE ONLY
STRIPE_SECRET_KEY=sk_test_51...

# Webhook Secret - For Stripe webhook signature verification
# Get from: https://dashboard.stripe.com/webhooks
STRIPE_WEBHOOK_SECRET=whsec_...

# Stripe Product IDs (optional - for easy reference)
# STRIPE_WORKSHOP_PRICE_ID=price_...
# STRIPE_ASSESSMENT_PRICE_ID=price_...

# ============================================================================
# Upstash Redis (Rate Limiting & Caching)
# ============================================================================
# Get these from: https://console.upstash.com
#
# Used for:
# - API rate limiting
# - Session management
# - Temporary data caching

UPSTASH_REDIS_REST_URL=https://your-redis.upstash.io
UPSTASH_REDIS_REST_TOKEN=AYA...

# ============================================================================
# AI Provider API Keys
# ============================================================================
# At least one provider is required for AI features
#
# Recommended: Use all three for redundancy and feature coverage
# - Google AI (Gemini): Best for multimodal, cost-effective
# - OpenAI: Industry standard, reliable
# - Anthropic (Claude): Best for long-context, reasoning

# Google AI (Gemini)
# Get from: https://makersuite.google.com/app/apikey
GOOGLE_AI_API_KEY=your-google-ai-api-key

# OpenAI (GPT-4, GPT-3.5)
# Get from: https://platform.openai.com/api-keys
OPENAI_API_KEY=your-openai-api-key

# Anthropic (Claude)
# Get from: https://console.anthropic.com/api-keys
ANTHROPIC_API_KEY=your-anthropic-api-key

# Firecrawl API Key (for web scraping and search)
# Get from: https://firecrawl.dev
FIRECRAWL_API_KEY=your-firecrawl-api-key

# ============================================================================
# Email Service Configuration
# ============================================================================
# Choose ONE email provider
#
# Recommended: Resend (best DX, modern, reliable)
# Alternative: SendGrid, AWS SES, or SMTP

# Resend (Recommended)
# Get from: https://resend.com/api-keys
RESEND_API_KEY=re_...

# SendGrid (Alternative)
# SENDGRID_API_KEY=SG...

# Generic SMTP (Alternative)
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASSWORD=your-app-password
# SMTP_FROM_EMAIL=noreply@humanglue.ai
# SMTP_FROM_NAME=HumanGlue

# ============================================================================
# Error Tracking & Monitoring
# ============================================================================

# Sentry (Error Tracking)
# Get from: https://sentry.io
# Both NEXT_PUBLIC_* (client) and server-side (SENTRY_DSN) needed
NEXT_PUBLIC_SENTRY_DSN=https://...@o....ingest.sentry.io/...
SENTRY_DSN=https://...@o....ingest.sentry.io/...
SENTRY_AUTH_TOKEN=sntrys_...
SENTRY_ORG=your-org
SENTRY_PROJECT=humanglue

# Sentry configuration
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1
SENTRY_REPLAYS_SESSION_SAMPLE_RATE=0.1
SENTRY_REPLAYS_ON_ERROR_SAMPLE_RATE=1.0

# ============================================================================
# Analytics & Tracking
# ============================================================================

# Google Analytics 4
# Get from: https://analytics.google.com
NEXT_PUBLIC_GA_MEASUREMENT_ID=G-XXXXXXXXXX

# PostHog (Product Analytics)
# Get from: https://posthog.com
NEXT_PUBLIC_POSTHOG_KEY=phc_...
NEXT_PUBLIC_POSTHOG_HOST=https://app.posthog.com

# Mixpanel (Alternative)
# NEXT_PUBLIC_MIXPANEL_TOKEN=...

# ============================================================================
# VAPI Voice AI (if using)
# ============================================================================
# Get from: https://vapi.ai

# VAPI_API_KEY=...
# NEXT_PUBLIC_VAPI_PUBLIC_KEY=...
# VAPI_PHONE_NUMBER_ID=...
# VAPI_ASSISTANT_ID=...

# ============================================================================
# CORS Configuration
# ============================================================================
# Comma-separated list of allowed origins for API requests
# Update for production domain

CORS_ALLOWED_ORIGINS=http://localhost:5040,http://localhost:3000,https://humanglue.ai,https://www.humanglue.ai

# ============================================================================
# Rate Limiting Configuration
# ============================================================================
# Configure rate limits for different endpoint tiers
# Format: number of requests per time window

# Strict tier (public endpoints, no auth required)
RATE_LIMIT_STRICT_MAX=10
RATE_LIMIT_STRICT_WINDOW=10s

# Standard tier (authenticated endpoints)
RATE_LIMIT_STANDARD_MAX=30
RATE_LIMIT_STANDARD_WINDOW=1m

# Lenient tier (premium users, internal use)
RATE_LIMIT_LENIENT_MAX=100
RATE_LIMIT_LENIENT_WINDOW=1m

# ============================================================================
# Feature Flags
# ============================================================================
# Control feature availability across environments
# Use for gradual rollouts and A/B testing

# Core features
NEXT_PUBLIC_ENABLE_WORKSHOPS=true
NEXT_PUBLIC_ENABLE_ASSESSMENTS=true
NEXT_PUBLIC_ENABLE_TALENT_MARKETPLACE=true
NEXT_PUBLIC_ENABLE_PAYMENTS=true

# Optional features
NEXT_PUBLIC_ENABLE_VOICE_INPUT=false
NEXT_PUBLIC_ENABLE_FILE_UPLOADS=false
NEXT_PUBLIC_ENABLE_CHAT_EXPORT=false
NEXT_PUBLIC_ENABLE_AI_ASSISTANT=true

# Experimental features
NEXT_PUBLIC_ENABLE_BETA_FEATURES=false
NEXT_PUBLIC_ENABLE_ANALYTICS=true
NEXT_PUBLIC_ENABLE_ERROR_TRACKING=true

# ============================================================================
# Security & Authentication
# ============================================================================

# JWT Configuration
# JWT_SECRET=your-jwt-secret-here
# JWT_EXPIRES_IN=7d

# Session Configuration
# SESSION_SECRET=your-session-secret-here
# SESSION_MAX_AGE=604800

# Password Requirements
# PASSWORD_MIN_LENGTH=8
# PASSWORD_REQUIRE_SPECIAL_CHAR=true
# PASSWORD_REQUIRE_NUMBER=true

# ============================================================================
# File Upload Configuration (if using)
# ============================================================================

# Maximum file size in bytes (10MB)
# MAX_FILE_SIZE=10485760

# Allowed file types
# ALLOWED_FILE_TYPES=image/jpeg,image/png,image/webp,application/pdf

# Supabase Storage bucket
# SUPABASE_STORAGE_BUCKET=uploads

# ============================================================================
# API Configuration
# ============================================================================

# API Timeouts (milliseconds)
API_TIMEOUT=30000
AI_TIMEOUT=60000

# API Logging
API_VERBOSE_LOGGING=false
LOG_LEVEL=info

# Retry Configuration
API_MAX_RETRIES=3
API_RETRY_DELAY=1000

# ============================================================================
# External Services
# ============================================================================

# Slack Notifications (optional)
# SLACK_WEBHOOK_URL=https://hooks.slack.com/services/...
# SLACK_CHANNEL=#deployments

# Discord Notifications (optional)
# DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/...

# ============================================================================
# Development & Debug
# ============================================================================

# Enable debug logging
DEBUG=false

# Enable verbose logging for specific modules
# DEBUG_MODULES=api,auth,payments

# Skip certain checks in development
# SKIP_ENV_VALIDATION=false

# Disable external API calls (use mocks)
# USE_MOCK_DATA=false

# ============================================================================
# Performance Monitoring
# ============================================================================

# Enable performance monitoring
# ENABLE_PERFORMANCE_MONITORING=true

# Performance sampling rate (0.0 to 1.0)
# PERFORMANCE_SAMPLE_RATE=0.1

# ============================================================================
# Cache Configuration
# ============================================================================

# Cache TTL (seconds)
# CACHE_TTL_DEFAULT=3600
# CACHE_TTL_WORKSHOPS=86400
# CACHE_TTL_ASSESSMENTS=3600

# ============================================================================
# Database Configuration (if using additional databases)
# ============================================================================

# PostgreSQL (if direct connection needed)
# DATABASE_URL=postgresql://user:password@host:5432/dbname
# DATABASE_POOL_MIN=2
# DATABASE_POOL_MAX=10

# ============================================================================
# Webhook Configuration
# ============================================================================

# Webhook secrets for signature verification
# WEBHOOK_SECRET_STRIPE=whsec_...
# WEBHOOK_SECRET_GITHUB=...

# ============================================================================
# Build Configuration
# ============================================================================

# Bundle analysis
# ANALYZE=false

# Build optimization
# NEXT_TELEMETRY_DISABLED=1

# Source maps in production
# GENERATE_SOURCEMAP=false

# ============================================================================
# Deployment Information (Auto-populated by Netlify)
# ============================================================================
# These are automatically set by Netlify - don't set manually

# NETLIFY=true
# DEPLOY_PRIME_URL=https://deploy-preview-123--your-site.netlify.app
# DEPLOY_URL=https://your-site.netlify.app
# URL=https://your-site.netlify.app
# CONTEXT=production|deploy-preview|branch-deploy
# BRANCH=main
# COMMIT_REF=abc123
# REVIEW_ID=123

# ============================================================================
# Notes
# ============================================================================
#
# Environment Priority:
# 1. System environment variables (highest priority)
# 2. .env.local (local development)
# 3. .env.production (production build)
# 4. .env (lowest priority)
#
# Security Best Practices:
# - Never commit .env.local or .env.production to git
# - Rotate secrets regularly (every 90 days)
# - Use different keys for development and production
# - Monitor API key usage for anomalies
# - Implement rate limiting on all public endpoints
# - Use environment-specific Stripe keys
#
# Deployment Checklist:
# - Set all required variables in Netlify dashboard
# - Verify NEXT_PUBLIC_SITE_URL matches your domain
# - Confirm Stripe keys match environment (test vs live)
# - Test error tracking is working
# - Verify analytics are collecting data
# - Check rate limiting is active
#
# ============================================================================
